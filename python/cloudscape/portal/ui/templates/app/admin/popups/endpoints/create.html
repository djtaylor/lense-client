{# Create Endpoint #}
<div class="popup_content" type="popup" target="endpoint.create">
	<div class="popup_title">Create Endpoint</div>
	<div class="popup_body">
		<div class="popup_desc">
		Create a new endpoint which can be mapped using ACL definitions. Must map to an installed application
		and utility class.
		</div>
		<form id="create_endpoint">
		
			{# Endpoint Description #}
			<div class="popup_row">
				<div class="popup_row_label">Description:</div>
				<div class="popup_row_input">
					<input type="text" form="create_endpoint" name="desc" value="" required />
					<div class="form_input_icon_def" type="icon" form="create_endpoint" name="desc"></div>
				</div>
			</div>
		
			{# Endpoint Path #}
			<div class="popup_row">
				<div class="popup_row_label">Path:</div>
				<div class="popup_row_input">
					<input type="text" form="create_endpoint" name="ep_path" data_map="path" value="" required />
					<div class="form_input_icon_def" type="icon" form="create_endpoint" name="ep_path"></div>
				</div>
			</div>
			
			{# Endpoint Action #}
			<div class="popup_row">
				<div class="popup_row_label">Action:</div>
				<div class="popup_row_input">
					<input type="text" form="create_endpoint" name="ep_action" data_map="action" value="" required />
					<div class="form_input_icon_def" type="icon" form="create_endpoint" name="ep_action"></div>
				</div>
			</div>
		
			{# Endpoint Method #}
			<div class="popup_row">
				<div class="popup_row_label">Method:</div>
				<div class="popup_row_input">
					<select name="ep_method" form="create_endpoint">
						<option value="GET" selected="selected">GET</option>
						<option value="POST">POST</option>
						<option value="PUT">PUT</option>
						<option value="DELETE">DELETE</option>
					</select>
					<input type="hidden" form="create_endpoint" name="ep_method" value="GET" data_map="method" required validate/>
				</div>
			</div>
			
			{# Endpoint Enabled #}
			<div class="popup_row">
				<div class="popup_row_label">Enabled:</div>
				<div class="popup_row_input">
					<select name="enabled" form="create_endpoint">
						<option value="bool:true" selected="selected">Yes</option>
						<option value="bool:false">No</option>
					</select>
					<input type="hidden" form="create_endpoint" name="enabled" value="bool:true" required validate/>
				</div>
			</div>
			
			{# Endpoint Protected #}
			<div class="popup_row">
				<div class="popup_row_label">Protected:</div>
				<div class="popup_row_input">
					<select name="protected" form="create_endpoint">
						<option value="bool:true">Yes</option>
						<option value="bool:false" selected="selected">No</option>
					</select>
					<input type="hidden" form="create_endpoint" name="protected" value="bool:true" required validate/>
				</div>
			</div>
		
			{# Endpoint Module #}
			<div class="popup_row">
				<div class="popup_row_label">Module:</div>
				<div class="popup_row_input">
					<select name="mod" form="create_endpoint">
						<option value="">Please select a module...</option>
						<option value="new">New module path...</option>
						{% for module in modules %}
							<option value="{{ module }}">{{ module }}</option>
						{% endfor %}
					</select>
					<input type="hidden" form="create_endpoint" name="mod" value="" required validate/>
				</div>
			</div>
			
			{# Endpoint Module New #}
			<div class="popup_row" target="popup_new" style="display:none;">
				<div class="popup_row_label">New Module:</div>
				<div class="popup_row_input">
					<input type="text" form="create_endpoint" name="mod_new" value="" ignore/>
					<div class="form_input_icon_def" type="icon" form="create_endpoint" name="mod_new"></div>
				</div>
			</div>
			
			{# Endpoint Class #}
			<div class="popup_row">
				<div class="popup_row_label">Class:</div>
				<div class="popup_row_input">
					<input type="text" form="create_endpoint" name="cls" value="" required />
					<div class="form_input_icon_def" type="icon" form="create_endpoint" name="cls"></div>
				</div>
			</div>
			
			{# Endpoint Utilities #}
			<div class="popup_row">
				<div class="popup_row_label">External Utilities:</div>
				<div class="popup_row_input">
					<select name="utils" form="create_endpoint" multiple>
						<option value="">-none-</option>
						{% for util in utils %}
							<option value="{{ util.0 }}">{{ util.1 }}</option>
						{% endfor %}
					</select>
					<input type="hidden" form="create_endpoint" name="utils" value="" parse="list" validate/>
				</div>
			</div>
		
			{# API Action / Path / Method #}
			<input type="hidden" form="create_endpoint" name="action" value="create" noreset>
			<input type="hidden" form="create_endpoint" name="path" value="auth/endpoints" noreset>
			<input type="hidden" form="create_endpoint" name="method" value="post" noreset>
			<input type="hidden" form="create_endpoint" name="callback" value="endpoint.create" noreset>
	
			{# Form Validation Response #}
			<div class="form_response" type="response" target="#create_endpoint"></div>
		</form>
		<div class="popup_submit" type="button" action="method" target="api.submit" arg="create_endpoint">Create Endpoint</div>
	</div>
</div>